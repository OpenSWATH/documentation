TRIC
=========

Overview
--------

TRIC [1]_ is an alignment software for targeted proteomics (SRM or SWATH-MS) data. TRIC uses a graph-based alignment strategy based on non-linear retention time correction to integrate information from all available runs. The input consists of a set of csv files derived from a targeted proteomics experiment generated by OpenSWATH (using either mProphet or PyProphet) or generated by Peakview.

There are two basic running modes available. The first one uses a reference-based alignment where a single run is chosen as a reference and all other runs are aligned to it. This is a useful choice for a small number of runs that are chromatographically similar. The second mode generates a guidance tree based on chromatographic similarity of the input runs and uses this tree to align the targeted proteomics runs (the nodes in the tree are runs and the edges are pairwise alignments). Generally this mode is better for a large number of runs or for chromatographically dissimilar samples.

Contact and Support
-------------------

We provide support for TRIC on the `GitHub repository
<https://github.com/msproteomicstools/msproteomicstools/issues>`_.


You can contact the author `Hannes Röst
<http://www.hroest.ch>`_.

Installation
------------
TRIC requires Python 2.7 and can be installed through ``pip``. On Microsoft Windows you will first have to install Python (the easiest way to do this is to download `Anaconda
<https://www.continuum.io/anaconda-overview>`_). You can then install TRIC through `PyPI
<https://pypi.python.org/pypi/msproteomicstools>`_:

.. code-block:: bash

   pip install numpy
   pip install msproteomicstools

This will install TRIC.py which you can then execute. You can also download the TRIC release directly from PyPI. To obtain the latest development version, please download the code from `GitHub
<https://github.com/msproteomicstools/msproteomicstools>`_. If you are using Microsoft Windows and Anaconda, it is possible that BioPython does not properly install and you may have to install it through Anaconda:

.. code-block:: bash

   conda install biopython

Tutorial
--------
After installing TRIC, please familiarize yourself with the `TRIC Tutorial
<https://github.com/msproteomicstools/msproteomicstools/blob/master/TRIC-README.md>`_. All command line parameters and their effects are explained in the tutorial and the associated tutorial paper (Röst et al). Currently, the recommended parameters for TRIC are:

.. code-block:: bash

   feature_alignment.py 
   --in file1_input.csv file2_input.csv file3_input.csv 
   --out aligned.csv 
   --method LocalMST --realign_method lowess_cython --max_rt_diff 60 
   --mst:useRTCorrection True --mst:Stdev_multiplier 3.0 
   --target_fdr 0.01 --max_fdr_quality 0.05 

An extended tutorial describing a complete OpenSWATH analysis workflow including TRIC was recently published [2]_ and is also available from `bioRxiv
<http://biorxiv.org/content/early/2016/03/19/044552>`_.

Data
----
Availability
~~~~~~~~~~~~
The TRIC Gold Standard, the *Streptococcus pyogenes* data sets and the iPSC datasets are available from the PeptideAtlas raw data repository with accession number `PASS00788
<http://www.peptideatlas.org/PASS/PASS00788>`_.

The Skyline results are available from the same repository where a .sky and .sky.view file are provided.

TRIC Gold Standard
~~~~~~~~~~~~~~~~~~
The TRIC Gold Standard dataset contains a set of manually validated aligned peptides and can be found in the ``./ManualValidation`` folder on the FTP server.

- 16 WIFF raw instrument data files
- 1 Skyline file with manually picked data
- 1 CSV file with the manually picked peaks (Skyline export)
- The TRIC results
- Python script used to compare manual with TRIC data

Streptococcus pyogenes
~~~~~~~~~~~~~~~~~~~~~~
- 16 WIFF raw instrument data files
- 1 Assay library in TraML and CSV format
- 1 iRT library in TraML and CSV format (use instead of default iRT)
- 16 OpenSWATH output files (results/openswath)
- 1 TRIC output file using local MST parameters as described in the paper
- 1 unaligned output matrix (noalign_all_1pcnt.csv)

human iPSC
~~~~~~~~~~
- 8 WIFF raw instrument data files
- 1 Assay library in TraML and CSV format
- OpenSWATH output files
- 1 TRIC output file using local MST parameters as described in the paper

References
----------
.. [1] Röst HL, Liu Y, D'Agostino G, Zanella M, Navarro P, Rosenberger G, Collins BC, Gillet L, Testa G, Malmström L, Aebersold R. TRIC: an automated alignment strategy for reproducible protein quantification in targeted proteomics. Nat Methods. 2016 Sep;13(9):777-83. doi: 10.1038/nmeth.3954. Epub 2016 Aug 1. PMID: 27479329

.. [2] Röst HL, Aebersold R, Schubert OT. Automated SWATH Data Analysis Using Targeted Extraction of Ion Chromatograms. Methods Mol Biol. 2017;1550:289-307. doi: 10.1007/978-1-4939-6747-6_20. PMID: 28188537
